<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.
broadcast chan zbozi_se_uklada_do_kosiku, kosik_timeout, platba_timeout, odesila_se_objednavka, prijima_se_dobirka, odmita_se_dobirka, odesila_se_platba, odesila_se_dobirecna_objednavka;

clock cas_update_kosiku;

typedef int[0,3] typ_platby_t;
const int typ_platby_nezvolen = 0;
const int typ_platby_dobirka = 1;
const int typ_platby_kreditka = 2;
const int typ_platby_prevod = 3;

typ_platby_t typ_platby;
</declaration><template><name x="5" y="5">zakaznik</name><parameter>broadcast chan &amp;zbozi_se_uklada_do_kosiku, broadcast chan &amp;kosik_timeout, broadcast chan &amp;platba_timeout, broadcast chan &amp;odesila_se_objednavka, broadcast chan &amp;prijima_se_dobirka, broadcast chan &amp;odmita_se_dobirka, broadcast chan &amp;odesila_se_platba, broadcast chan &amp;odesila_dobirecna_objednavka</parameter><declaration>// Place local declarations here.
</declaration><location id="id0" x="-152" y="16"><name x="-144" y="-16">Platebni_brana_kreditka</name><label kind="invariant" x="-136" y="0">typ_platby == typ_platby_kreditka</label></location><location id="id1" x="120" y="-56"><name x="88" y="-96">Vybrana_dobirka</name></location><location id="id2" x="-328" y="88"><name x="-576" y="80">Platebni_prikaz_proveden_spatne</name></location><location id="id3" x="-328" y="144"><name x="-544" y="136">Platebni_prikaz_neproveden</name></location><location id="id4" x="-336" y="224"><name x="-536" y="216">Platebni_prikaz_proveden</name></location><location id="id5" x="0" y="208"><name x="24" y="200">Platebni_brana_zaplaceno_kreditkou</name></location><location id="id6" x="-80" y="288"><name x="-56" y="280">Platebni_brana_udaje_k_prikazu</name><label kind="invariant" x="-64" y="304">typ_platby == typ_platby_prevod</label></location><location id="id7" x="40" y="112"><name x="64" y="104">Platebni_brana_zrusena</name></location><location id="id8" x="312" y="80"><name x="336" y="72">Dobirka_odmitnuta</name></location><location id="id9" x="304" y="-64"><name x="328" y="-72">Objednavka_prijata_dobirka</name></location><location id="id10" x="-288" y="-104"><name x="-264" y="-128">Objednavka_odeslana</name><committed/></location><location id="id11" x="-288" y="-384"><name x="-272" y="-392">Nastaven_zpusob_platby</name></location><location id="id12" x="-288" y="-288"><name x="-264" y="-296">Nastaven_zpusob_doruceni</name></location><location id="id13" x="-288" y="-224"><name x="-272" y="-232">Nastavena_dodaci_adresa</name></location><location id="id14" x="-814" y="-394"><name x="-872" y="-376">Zbozi_v_anonymnim_kosiku</name></location><location id="id15" x="-288" y="-456"><name x="-298" y="-486">Zbozi_v_kosiku</name></location><location id="id16" x="-712" y="-456"><name x="-760" y="-488">Zaregistrovan</name></location><location id="id17" x="-608" y="-456"><name x="-640" y="-488">Prihlasen</name></location><location id="id18" x="-904" y="-456"><name x="-928" y="-488">Start</name></location><init ref="id18"/><transition><source ref="id0"/><target ref="id7"/><label kind="synchronisation" x="-88" y="32">platba_timeout?</label></transition><transition><source ref="id0"/><target ref="id5"/></transition><transition><source ref="id10"/><target ref="id0"/><label kind="guard" x="-200" y="-48">typ_platby == typ_platby_kreditka</label></transition><transition><source ref="id4"/><target ref="id4"/><nail x="-344" y="264"/><nail x="-376" y="256"/></transition><transition><source ref="id3"/><target ref="id3"/><nail x="-368" y="176"/><nail x="-336" y="184"/></transition><transition><source ref="id2"/><target ref="id2"/><nail x="-360" y="56"/><nail x="-328" y="40"/></transition><transition><source ref="id13"/><target ref="id17"/><label kind="synchronisation" x="-504" y="-256">kosik_timeout?</label><nail x="-600" y="-224"/></transition><transition><source ref="id12"/><target ref="id17"/><label kind="synchronisation" x="-504" y="-320">kosik_timeout?</label><nail x="-568" y="-288"/></transition><transition><source ref="id11"/><target ref="id17"/><label kind="synchronisation" x="-504" y="-408">kosik_timeout?</label><nail x="-552" y="-384"/></transition><transition><source ref="id15"/><target ref="id17"/><label kind="synchronisation" x="-504" y="-456">kosik_timeout?</label><nail x="-456" y="-424"/></transition><transition><source ref="id5"/><target ref="id5"/><nail x="-32" y="240"/><nail x="0" y="264"/></transition><transition><source ref="id7"/><target ref="id7"/><nail x="64" y="64"/><nail x="24" y="56"/></transition><transition><source ref="id8"/><target ref="id8"/><nail x="352" y="136"/><nail x="312" y="136"/></transition><transition><source ref="id9"/><target ref="id9"/><nail x="312" y="-128"/><nail x="280" y="-120"/></transition><transition><source ref="id10"/><target ref="id1"/><label kind="guard" x="-160" y="-80">typ_platby == typ_platby_dobirka</label><label kind="synchronisation" x="-168" y="-96">odesila_dobirecna_objednavka!</label><nail x="56" y="-96"/></transition><transition><source ref="id1"/><target ref="id8"/><label kind="synchronisation" x="112" y="40">odmita_se_dobirka!</label></transition><transition><source ref="id6"/><target ref="id2"/></transition><transition><source ref="id6"/><target ref="id3"/></transition><transition><source ref="id6"/><target ref="id4"/><label kind="synchronisation" x="-320" y="272">odesila_se_platba!</label></transition><transition><source ref="id10"/><target ref="id6"/><label kind="guard" x="-464" y="-8">typ_platby == typ_platby_prevod</label></transition><transition><source ref="id1"/><target ref="id9"/><label kind="synchronisation" x="176" y="-48">prijima_se_dobirka!</label></transition><transition><source ref="id13"/><target ref="id10"/><label kind="synchronisation" x="-280" y="-192">odesila_se_objednavka!</label></transition><transition><source ref="id12"/><target ref="id13"/><label kind="assignment" x="-264" y="-272">cas_update_kosiku:=0</label></transition><transition><source ref="id11"/><target ref="id12"/><label kind="select" x="-272" y="-368">typ_platby_sel : int[1,3]</label><label kind="assignment" x="-272" y="-344">cas_update_kosiku := 0,
typ_platby := typ_platby_sel</label></transition><transition><source ref="id15"/><target ref="id11"/><label kind="assignment" x="-280" y="-424">cas_update_kosiku:=0</label></transition><transition><source ref="id14"/><target ref="id16"/></transition><transition><source ref="id18"/><target ref="id14"/></transition><transition><source ref="id17"/><target ref="id15"/><label kind="synchronisation" x="-536" y="-512">zbozi_se_uklada_do_kosiku!</label><nail x="-456" y="-488"/></transition><transition><source ref="id16"/><target ref="id17"/></transition><transition><source ref="id18"/><target ref="id16"/></transition></template><template><name>obchod</name><parameter>broadcast chan &amp;bylo_vlozeno_zbozi_do_kosiku, broadcast chan &amp;kosik_timeout, broadcast chan &amp;platba_timeout, broadcast chan &amp;byla_prijata_objednavka, broadcast chan &amp;byla_prijata_dobirka, broadcast chan &amp;byla_odmitnuta_dobirka, broadcast chan &amp;byla_prijata_platba, broadcast chan &amp;byla_prijata_dobirecna_objednavka</parameter><declaration>
clock cas_od_prijeti_objednavky;
bool zaplaceno;</declaration><location id="id19" x="-632" y="-248"><name x="-672" y="-288">Zbozi_v_kosiku</name><label kind="invariant" x="-696" y="-232">cas_update_kosiku &lt; 1000</label></location><location id="id20" x="-424" y="288"><name x="-400" y="272">Objednavka_uzavrena_uspesne</name></location><location id="id21" x="-544" y="192"><name x="-688" y="176">Dobirka_prijata</name></location><location id="id22" x="-384" y="-16"><name x="-512" y="-32">Expedice_zbozi</name></location><location id="id23" x="-128" y="280"><name x="-152" y="240">Dobirka_neprijata</name></location><location id="id24" x="16" y="280"><name x="32" y="264">Objednavka_uzavrena_neuspesne</name></location><location id="id25" x="64" y="-16"><name x="56" y="-48">Platba_neprijata</name></location><location id="id26" x="-176" y="-16"><name x="-152" y="-24">Platba_prijata</name></location><location id="id27" x="-224" y="-248"><name x="-192" y="-256">Cekani_na_platbu</name><label kind="invariant" x="-208" y="-280">cas_od_prijeti_objednavky &lt; 10</label></location><location id="id28" x="-312" y="-408"></location><init ref="id28"/><transition><source ref="id24"/><target ref="id24"/><nail x="-16" y="320"/><nail x="48" y="320"/></transition><transition><source ref="id20"/><target ref="id20"/><nail x="-464" y="312"/><nail x="-408" y="328"/></transition><transition><source ref="id19"/><target ref="id28"/><label kind="guard" x="-616" y="-432">cas_update_kosiku&gt;=1000</label><label kind="synchronisation" x="-584" y="-400">kosik_timeout!</label><nail x="-632" y="-408"/></transition><transition><source ref="id28"/><target ref="id19"/><label kind="synchronisation" x="-416" y="-352">bylo_vlozeno_zbozi_do_kosiku?</label><label kind="assignment" x="-472" y="-328">cas_update_kosiku:=0</label></transition><transition><source ref="id22"/><target ref="id20"/><label kind="guard" x="-400" y="184">zaplaceno==true</label></transition><transition><source ref="id21"/><target ref="id20"/></transition><transition><source ref="id22"/><target ref="id21"/><label kind="synchronisation" x="-640" y="104">byla_prijata_dobirka?</label></transition><transition><source ref="id25"/><target ref="id24"/></transition><transition><source ref="id23"/><target ref="id24"/></transition><transition><source ref="id22"/><target ref="id23"/><label kind="synchronisation" x="-216" y="160">byla_odmitnuta_dobirka?</label></transition><transition><source ref="id26"/><target ref="id22"/><label kind="assignment" x="-288" y="0">zaplaceno:=true</label></transition><transition><source ref="id27"/><target ref="id22"/><label kind="synchronisation" x="-568" y="-128">byla_prijata_dobirecna_objednavka?</label></transition><transition><source ref="id27"/><target ref="id25"/><label kind="guard" x="-96" y="-168">cas_od_prijeti_objednavky&gt;=10</label><label kind="synchronisation" x="-72" y="-144">platba_timeout!</label></transition><transition><source ref="id27"/><target ref="id26"/><label kind="synchronisation" x="-176" y="-72">byla_prijata_platba?</label></transition><transition><source ref="id19"/><target ref="id27"/><label kind="synchronisation" x="-496" y="-272">byla_prijata_objednavka?</label><label kind="assignment" x="-488" y="-240">zaplaceno:=false,
cas_od_prijeti_objednavky:=0</label></transition></template><system>// Place template instantiations here.
zakaznik1 = zakaznik(zbozi_se_uklada_do_kosiku, kosik_timeout, platba_timeout, odesila_se_objednavka, prijima_se_dobirka, odmita_se_dobirka, odesila_se_platba, odesila_se_dobirecna_objednavka);
obchod1 = obchod(zbozi_se_uklada_do_kosiku, kosik_timeout, platba_timeout, odesila_se_objednavka, prijima_se_dobirka, odmita_se_dobirka, odesila_se_platba, odesila_se_dobirecna_objednavka);

// List one or more processes to be composed into a system.
system zakaznik1, obchod1;</system></nta>